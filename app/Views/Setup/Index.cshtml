@{
    ViewData["Title"] = "Configuraci√≥n del Sistema";
}

<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4><i class="fas fa-cogs"></i> Configuraci√≥n del Sistema de Auditor√≠a</h4>
                </div>
                <div class="card-body">
                    @if (TempData["SuccessMessage"] != null)
                    {
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i> @TempData["SuccessMessage"]
                        </div>
                    }

                    @if (TempData["ErrorMessage"] != null)
                    {
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-triangle"></i> @TempData["ErrorMessage"]
                        </div>
                    }

                    <h5>Configuraci√≥n de Auditor√≠a</h5>
                    <p class="text-muted">
                        Configura el sistema de auditor√≠a para registrar todos los cambios en la base de datos.
                    </p>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card border-info">
                                <div class="card-body">
                                    <h6 class="card-title">
                                        <i class="fas fa-database"></i> Crear Tablas de Auditor√≠a
                                    </h6>
                                    <p class="card-text small">
                                        Crea autom√°ticamente las tablas necesarias para el sistema de auditor√≠a.
                                    </p>
                                    <a href="@Url.Action("CreateAuditTables")" class="btn btn-info">
                                        <i class="fas fa-play"></i> Ejecutar
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card border-warning">
                                <div class="card-body">
                                    <h6 class="card-title">
                                        <i class="fas fa-file-code"></i> Scripts SQL Manuales
                                    </h6>
                                    <p class="card-text small">
                                        Si prefieres ejecutar los scripts manualmente en SQL Server.
                                    </p>
                                    <button class="btn btn-warning" onclick="toggleScripts()">
                                        <i class="fas fa-code"></i> Ver Scripts
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="scriptsSection" class="mt-4" style="display: none;">
                        <div class="alert alert-info">
                            <h6><i class="fas fa-info-circle"></i> Instrucciones para SQL Server</h6>
                            <ol>
                                <li>Abre SQL Server Management Studio</li>
                                <li>Con√©ctate a tu servidor de base de datos</li>
                                <li>Selecciona la base de datos <strong>empleados</strong></li>
                                <li>Ejecuta el siguiente script:</li>
                            </ol>
                        </div>

                        <div class="alert alert-warning">
                            <strong>üìÅ Ubicaci√≥n de los scripts:</strong><br>
                            <code>c:\Users\trabajo\Documents\aplicacion-nomina\app\Data\Scripts\</code>
                            <ul class="mt-2">
                                <li><strong>CreateAuditTables.sql</strong> - Crea las tablas de auditor√≠a</li>
                                <li><strong>CreateAuditTriggers.sql</strong> - (Opcional) Crea triggers autom√°ticos</li>
                            </ul>
                        </div>
                    </div>

                    <hr>

                    <div class="mt-4">
                        <h6>Acciones R√°pidas</h6>
                        <div class="btn-group" role="group">
                            <a href="@Url.Action("Index", "Audit")" class="btn btn-outline-primary">
                                <i class="fas fa-history"></i> Ver Auditor√≠a
                            </a>
                            <a href="@Url.Action("Index", "Home")" class="btn btn-outline-secondary">
                                <i class="fas fa-home"></i> Dashboard
                            </a>
                            <a href="@Url.Action("Index", "Employees")" class="btn btn-outline-success">
                                <i class="fas fa-users"></i> Empleados
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function toggleScripts() {
    var section = document.getElementById('scriptsSection');
    if (section.style.display === 'none') {
        section.style.display = 'block';
    } else {
        section.style.display = 'none';
    }
}
</script>
